$bar-spacing: calc($spacing / 2);

@import "./bar-margin.scss";
@import "./panel-button.scss";

.bar {
  @include unset($rec: true);
  font-size: $font-ui-size;
  font-family: $font-ui-name;

  .panel-button {
    @include panel-button($flat: true, $reactive: false);
  }

  & > box {
    margin-top: $bar-spacing;
    margin-bottom: $bar-spacing;
  }

  // Start Widgets

  .window-button {
    @include unset($rec: true);
    @include panel-button($flat: true, $reactive: true);
    color: $primary;
    padding-top: $padding * 0.5;
    padding-bottom: $padding * 0.5;
  }

  .workspaces {
    @include floating-widget($children: true);
    @include bar-margin($children: true);

    button {
      padding: $padding * 0.5 0;

      // Default Indicator (Empty Workspace)
      .indicator {
        transition: $transition;
        color: transparentize($outline, 0.5);
        border: transparent;
      }

      // Hovering Empty Workspace
      &.empty:hover .indicator {
        color: $primary;
      }

      // Occupied Workspace
      &.occupied {
        .indicator {
          color: $on-surface;
        }
        &:hover .indicator {
          color: $primary;
        }
      }

      // Active Workspace
      &.active {
        & .indicator,
        &.empty .indicator {
          color: $primary;
        }

        &:hover .indicator {
          color: lighten($primary, 8%);
        }
      }
    }
  }

  .media {
    image {
      margin: $spacing * 0.25 0;
    }

    button {
      &:disabled {
        color: $outline;
      }
    }

    .font-icon {
      font-family: "Font Awesome 6 Free Solid";
    }

    .controls {
      button {
        padding: $padding * 0.4 0;

        &:hover .font-icon {
          color: lighten($on-surface, 10%);
        }
      }
    }
  }

  .audio image,
  .backlight image,
  .battery image {
    padding: $padding * 0.5 0;
  }

  .system-tray {
    padding: $spacing * 0.125;

    .tray-item {
      margin: $spacing * 0.375;
      @if ($scheme == "light") {
        background-color: $on-surface;
        padding: $spacing * 0.25;
        margin: 0;
        border-radius: 50%;
      }
    }
  }

  .powermenu {
    @include floating-widget($children: true);
    @include bar-margin($children: true);

    &-button {
      padding: $padding * 1.2;
    }

    @mixin powermenu-color($color) {
      &.icon-bg-primary {
        color: $primary;
        &:hover {
          color: lighten($primary, 10%);
        }
      }

      color: $color;
      &:hover {
        color: lighten($color, 10%);
      }
    }

    &-revealer {
      & > box > :last-child {
        @include powermenu-color($red);
      }

      & revealer button {
        &:nth-child(1) {
          @include powermenu-color($magenta);
        }

        &:nth-child(2) {
          @include powermenu-color($blue);
        }

        &:nth-child(3) {
          @include powermenu-color($green);
        }

        &:nth-child(4) {
          @include powermenu-color($yellow);
        }
      }
    }
  }
}
