$bar-spacing: $spacing / 2;
$button-radius: $radii;

@import "./panel-button.scss";

.panel {
  @include unset($recursive: true);

  font-size: $font-size;
  margin: $wm-gaps 0;

  .panel-button {
    @include panel-button($flat: $bar-flat-buttons, $reactive: false);

    & > box > box:last-child {
      font-family: $mono-font;
      font-weight: bold;
    }
  }

  // Start Widgets

  .dashboard-button {
    label {
      transition: $transition;
      color: transparentize($accent, $amount: 0.2);
    }

    &:hover label {
      color: $accent;
    }
  }

  .workspaces {
    @include floating-widget($children: true);

    button {
      font-family: "Font Awesome 6 Free Solid";
      padding: $padding * 0.65 0;

      // Default Indicator (Empty Workspace)
      .indicator {
        box-shadow: inset 0 0 0 $border-width $border-color;
        transition: $transition;
        color: transparentize($opaque-border-color, 0.5);
      }

      $empty-accent-transparency: 0.6;

      // Hovering Empty Workspace
      &.empty:hover .indicator {
        color: rgba($accent, $empty-accent-transparency);
      }

      // Occupied Workspace
      &.occupied {
        &:hover .indicator {
          color: $accent;
        }

        .indicator {
          color: $foreground;
        }
      }

      // Active Workspace
      &.active {
        &:hover .indicator {
          color: $accent;
        }
        & .indicator {
          color: $accent;
        }

        &.empty .indicator {
          color: rgba($accent, $empty-accent-transparency);
        }
      }
    }
  }

  // End Widgets

  .weather {
    & .font-icon {
      font-family: "Weather Icons";
      font-size: $font-size * 1.05;
      font-weight: bold;
    }
  }

  .audio {
    .font-icon {
      font-family: "Font Awesome 6 Free Solid";
      font-size: $font-size * 1.05;
    }
  }

  .system-tray {
    .tray-item {
      margin: $bar-spacing * 0.75 0;
    }
  }

  .powermenu {
    @include floating-widget($children: true);
    &-button {
      padding: $padding * 0.8 0;
      & .font-icon {
        font-family: "feather";
        font-size: $font-size * 1.35;
        font-weight: bold;
      }
    }

    @mixin powermenu-color($color) {
      color: $color;
      &:hover {
        color: hover-color($color);
      }
    }

    &-revealer {
      & > box > :last-child {
        @include powermenu-color($red);
      }

      & revealer button {
        &:nth-child(1) {
          @include powermenu-color($magenta);
        }

        &:nth-child(2) {
          @include powermenu-color($blue);
        }

        &:nth-child(3) {
          @include powermenu-color($green);
        }

        &:nth-child(4) {
          @include powermenu-color($yellow);
        }
      }
    }
  }
}
