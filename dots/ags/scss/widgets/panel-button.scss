@mixin icon-bg-color($color) {
  & > box {
    padding: 0;
  }

  & > * > box:first-child {
    background-color: $color;
    color: $widget-background;
    padding: $popover-padding 0;
  }

  & > * > box:last-child {
    background-color: $widget-background;
    padding: $popover-padding 0;
  }
}

@mixin panel-button-icon {
  @include unset;
  & > box {
    @include floating-widget;
    border: unset;
  }

  & > * > box:first-child {
    font-weight: bold;
    border-radius: $button-radius $button-radius 0 0;
    border: $border-width solid $popover-border-color;
    padding-bottom: $popover-padding * 0.33;
  }

  & > * > box:last-child {
    background-color: $widget-background;
    border-radius: 0 0 $button-radius $button-radius;
    border: $border-width solid $popover-border-color;
  }

  &.panel-button-icon-bg-red {
    @include icon-bg-color($red);
  }

  &.panel-button-icon-bg-magenta {
    @include icon-bg-color($magenta);
  }

  &.panel-button-icon-bg-blue {
    @include icon-bg-color($blue);
  }

  &.panel-button-icon-bg-green {
    @include icon-bg-color($green);
  }

  &.panel-button-icon-bg-yellow {
    @include icon-bg-color($yellow);
  }
}

@mixin panel-button($flat: $bar-flat-buttons, $reactive: true) {
  @include unset;
  @include floating-widget;

  &.panel-button-icon {
    @include panel-button-icon;
  }

  transition: $transition;
  border-radius: $radii;

  & > * {
    padding: $padding;
  }

  &:hover {
    @if $reactive {
      color: $hover-accent;

      @if $drop-shadow {
        box-shadow: 0 0 min(6px, $spacing/2) 0 $shadow, inset 0 0 0 99px $hover;
      } @else {
        box-shadow: inset 0 0 0 99px $hover;
      }
    }
  }

  @if $reactive {
    &:active > *,
    &.active > * {
      label,
      image {
        color: $hover-accent;
      }
      background-image: $active-gradient;
      background-color: $accent;
    }

    label,
    image {
      font-weight: bold;
    }
  }
}
